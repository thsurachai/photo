title User login
 
actor Customer
participant Browser/Mobile
participant CBX web
participant ApiGateway
participant IDPWS
participant AM
participant FO-gatekeeper
participant FO-quest
 
 
Customer->Browser/Mobile : request login page
Browser/Mobile->CBX web : (1) login page
CBX web->Browser/Mobile : (1) return login page 
Customer->Browser/Mobile : login with user/pass 
Browser/Mobile->ApiGateway : (2) login (AjaxRequest)
ApiGateway->IDPWS : idpws/rest/authn/login
IDPWS->AM : (2.1) idpws/rest/authn/login
AM->AM : (2.2) am5/rest/authn/login
AM->IDPWS : (2.2) idpws/rest/authn/login
IDPWS->Browser/Mobile : (2) sessionToken
Browser/Mobile->ApiGateway : (3) oauth/ROPCReq/process 
ApiGateway->IDPWS : idpws/rest/authz/oauth/ROPCReq/process
IDPWS->AM : (3.1) idpws/rest/authz/oauth/ROPCReq/process
AM->AM : (3.2) am5/rest/authn/session/userInfo
AM->AM : (3.3) am5/rest/token/user/assigned/list
AM->AM : (3.4) am5/rest/authz/oauth/ROPCReq/process
IDPWS<-AM : (3.1) idpws/rest/authz/oauth/ROPCReq/process
IDPWS->Browser/Mobile : (3) jwt
 
 
note over Browser/Mobile,ApiGateway: get acct summary data (10 quest api calls)
 
Browser/Mobile->ApiGateway : (4) quest/graphql (AjaxRequest)
ApiGateway->FO-gatekeeper : quest/graphql
FO-gatekeeper->FO-quest : (4.1) quest/graphql
FO-quest->Browser/Mobile : (4) acct summary data